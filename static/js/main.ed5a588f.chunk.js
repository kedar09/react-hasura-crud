(this.webpackJsonpreact_hasura_crud=this.webpackJsonpreact_hasura_crud||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},106:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n(0),c=n.n(a),s=n(78),d=n.n(s),i=(n(87),n(35)),o=n(13),u=n(29),j=n.n(u),l=n(37),b=n(38),h=n(34),O=n(33),p=n(15),f=n(43);function x(){var e=Object(f.a)(["\n  mutation($id: Int!) {\n    delete_user(where: { id: { _eq: $id } }) {\n      affected_rows\n    }\n  }\n"]);return x=function(){return e},e}function m(){var e=Object(f.a)(["\n  mutation($id: Int!, $name: String!, $address: String!) {\n    update_user(\n      where: { id: { _eq: $id } }\n      _set: { name: $name, address: $address }\n    ) {\n      affected_rows\n      returning {\n        id\n        name\n        address\n      }\n    }\n  }\n"]);return m=function(){return e},e}function v(){var e=Object(f.a)(["\n  query {\n    user(order_by: { id: asc }) {\n      id\n      name\n      address\n    }\n  }\n"]);return v=function(){return e},e}function g(){var e=Object(f.a)(["\n  mutation($name: String!, $address: String!) {\n    insert_user(objects: { name: $name, address: $address }) {\n      affected_rows\n      returning {\n        id\n        name\n        address\n      }\n    }\n  }\n"]);return g=function(){return e},e}var y=Object(p.gql)(g()),w=Object(p.gql)(v()),C=Object(p.gql)(m()),N=Object(p.gql)(x()),q=n(113),k=n(112),S=n(114),_=(n(94),n(30)),I=n.n(_),U=function(e){var t=Object(a.useState)({id:"",name:"",address:""}),n=Object(O.a)(t,2),c=n[0],s=n[1],d=Object(p.useMutation)(C),i=Object(O.a)(d,1)[0],u=Object(o.f)();Object(a.useEffect)((function(){s(Object(h.a)(Object(h.a)({},c),{},{id:e.location.state.id,name:e.location.state.name,address:e.location.state.address}))}),[]);var f=function(e){s(Object(h.a)(Object(h.a)({},c),{},Object(b.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i({variables:c,optimisticResponse:!0,awaitRefetchQueries:!0,refetchQueries:[{query:w}]});case 3:t=e.sent,console.log(t),I()("Successfully!","User updated!","success"),u.push("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),I()("Failed!","Update user request failed!","error");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"updateUserDiv",children:Object(r.jsxs)(q.a,{children:[Object(r.jsx)(q.a.Header,{children:"Update User"}),Object(r.jsx)(q.a.Body,{children:Object(r.jsxs)(k.a,{className:"updateUserForm",children:[Object(r.jsxs)(k.a.Group,{controlId:"formBasicID",children:[Object(r.jsx)(k.a.Label,{children:"ID"}),Object(r.jsx)(k.a.Control,{type:"text",name:"id",value:c.id,disabled:!0,onChange:f,placeholder:"Enter id"})]}),Object(r.jsxs)(k.a.Group,{controlId:"formBasicName",children:[Object(r.jsx)(k.a.Label,{children:"Name"}),Object(r.jsx)(k.a.Control,{type:"text",name:"name",value:c.name,onChange:f,placeholder:"Enter name"})]}),Object(r.jsxs)(k.a.Group,{controlId:"formBasicName",children:[Object(r.jsx)(k.a.Label,{children:"Address"}),Object(r.jsx)(k.a.Control,{type:"text",name:"address",value:c.address,onChange:f,placeholder:"Enter address"})]}),Object(r.jsx)(S.a,{variant:"primary",className:"updateUserSubmitButton",onClick:x,children:"Update"}),Object(r.jsx)(S.a,{variant:"secondary",onClick:function(){u.push("/")},children:"Cancel"})]})})]})})},$=n(111),A=n(109),B=n(110),E=n(108),F=(n(101),function(){var e=Object(p.useQuery)(w,{}),t=e.loading,n=e.error,a=e.data,c=Object(p.useMutation)(N),s=Object(O.a)(c,1)[0],d=Object(o.f)();if(t)return Object(r.jsx)(q.a,{className:"cardSpinner",children:Object(r.jsx)(E.a,{animation:"border",role:"status",children:Object(r.jsx)("span",{className:"sr-only",children:"Loading..."})})});if(n)return"Error! ".concat(n.message);var i=function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s({variables:{id:t},optimisticResponse:!0,update:function(e){var n=e.readQuery({query:w}).user.filter((function(e){return e.id!==t}));e.writeQuery({query:w,data:{user:n}})}});case 3:n=e.sent,console.log(n),I()("Successfully!","User deleted!","success"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),I()("Failed!","Delete user request failed!","error");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){return a.user.map((function(e){var t=e.id,n=e.name,a=e.address;return Object(r.jsx)("tbody",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:t}),Object(r.jsx)("td",{children:n}),Object(r.jsx)("td",{children:a}),Object(r.jsx)("td",{children:Object(r.jsx)(A.a,{size:25,color:"#0066ff",onClick:function(){d.push({pathname:"/update-user",state:{id:t,name:n,address:a}})}})}),Object(r.jsx)("td",{children:Object(r.jsx)(B.a,{size:25,color:"#0066ff",onClick:function(){i(t)}})})]})},t)}))};return Object(r.jsx)("div",{children:Object(r.jsxs)($.a,{striped:!0,bordered:!0,hover:!0,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"ID"}),Object(r.jsx)("th",{children:"Name"}),Object(r.jsx)("th",{children:"Address"}),Object(r.jsx)("th",{children:"Edit"}),Object(r.jsx)("th",{children:"Delete"})]})}),Object(r.jsx)(u,{})]})})}),D=(n(102),function(e){var t=Object(o.f)();return Object(r.jsx)("div",{children:Object(r.jsxs)(q.a,{children:[Object(r.jsx)(q.a,{className:"cardMargin",children:Object(r.jsx)(F,{})}),Object(r.jsx)("div",{className:"cardMargin",children:Object(r.jsx)(S.a,{variant:"primary",onClick:function(){t.push("/add-user")},children:"Add New User"})})]})})}),L=(n(103),function(){var e=Object(o.f)(),t=Object(a.useState)({name:"",address:""}),n=Object(O.a)(t,2),c=n[0],s=n[1],d=Object(p.useMutation)(y),i=Object(O.a)(d,1)[0],u=function(e){s(Object(h.a)(Object(h.a)({},c),{},Object(b.a)({},e.target.name,e.target.value)))},f=function(){var t=Object(l.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i({variables:c,optimisticResponse:!0,awaitRefetchQueries:!0,refetchQueries:[{query:w}]});case 3:r=t.sent,console.log(r),I()("Successfully!","New user added!","success"),e.push("/",{updateData:!0}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),I()("Failed!","Add new user request failed!","error");case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"divAddUser",children:Object(r.jsxs)(q.a,{children:[Object(r.jsx)(q.a.Header,{children:"Add New User"}),Object(r.jsx)(q.a.Body,{children:Object(r.jsxs)(k.a,{className:"addUserForm",children:[Object(r.jsxs)(k.a.Group,{controlId:"formBasicName",children:[Object(r.jsx)(k.a.Label,{children:"Name"}),Object(r.jsx)(k.a.Control,{type:"text",name:"name",value:c.name,onChange:u,placeholder:"Enter name"})]}),Object(r.jsxs)(k.a.Group,{controlId:"formBasicName",children:[Object(r.jsx)(k.a.Label,{children:"Address"}),Object(r.jsx)(k.a.Control,{type:"text",name:"address",value:c.address,onChange:u,placeholder:"Enter address"})]}),Object(r.jsx)(S.a,{variant:"primary",onClick:f,children:"Submit"})]})})]})})}),M=function(){return Object(r.jsx)(i.a,{children:Object(r.jsxs)(o.c,{children:[Object(r.jsx)(o.a,{exact:!0,path:"/",component:D}),Object(r.jsx)(o.a,{exact:!0,path:"/add-user",component:L}),Object(r.jsx)(o.a,{exact:!0,path:"/update-user",component:U})]})})};var Q=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(M,{})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,115)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},R=(n(104),new p.ApolloClient({uri:"https://your-app-name/v1/graphql",cache:new p.InMemoryCache}));d.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(p.ApolloProvider,{client:R,children:Object(r.jsx)(Q,{})})}),document.getElementById("root")),G()},87:function(e,t,n){},94:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.ed5a588f.chunk.js.map